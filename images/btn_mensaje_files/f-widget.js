null==window.c1&&(window.c1=0),null==window.widgetCssLoaded&&(window.widgetCssLoaded=!1);var smartWidgetsServerBaseUrl,productIdsFileData=[],deletedFileData=[],currentPageInPagination=1,deletedFileCreatedData=[],schemaData=[],tokenFileData=[],languageData=[],summaryFileData=[],widgetFileCount=[],alreadyLoadedWidgets=[],totalPageLinks=0,isForward=!0,lastDifferenceFactor=0,currentMaxToSkip=0,counter=1,hashProductIdsData=null;smartWidgetsServerBaseUrl=null!=window._ekomiWidgetsServerUrl?window._ekomiWidgetsServerUrl:window._ekomiServerUrl;var fallBackLanguage="de",languageMapping={en:"en",de:"de",fr:"fr",es:"es",it:"it",nl:"nl",jpn:"ja",kor:"ko",tr:"tr",ru:"ru",pt:"pt",zht:"zh",el:"el",svk:"svk",ara:"ar",ukr:"uk",aze:fallBackLanguage,tha:"th",zhs:fallBackLanguage,da:"da",pl:"pl",ro:"ro",cze:"cs",bg:"bg",hu:"hu",Tfng:fallBackLanguage,sv:"swe",sl:"sl",sr:"sr",hr:"hr"};function getKeyByValue(e){for(var t in languageMapping)if(languageMapping.hasOwnProperty(t)&&languageMapping[t]===e)return t}function getPageLanguage(e){var t=window._language[e];return"auto"!=window._language&&"auto"!=t&&null!=t||null==(t=getKeyByValue(t=(t=window.navigator.userLanguage||window.navigator.language).split("-")[0]))&&(t=fallBackLanguage),null==t?fallBackLanguage:t}function evolute(e=""){let t=(e=e.replace(" ","")).split(/[+\-*/]/),a=[],i=[],n=parseFloat(t.shift());for(let r=0;r<e.length;r++)r==e.length-1&&a.push(n),"*"==e[r]||"/"==e[r]?n=arthmatic(n,parseFloat(t.shift()),e[r]):"+"==e[r]?(a.push(n),n=parseFloat(t.shift())):"-"==e[r]&&(i.push(n),n=parseFloat(t.shift()));let r=0;for(let e=0;e<Math.max(a.length,i.length);e++)r+=a[e]?a[e]:0-i[e]?i[e]:0;return r}function arthmatic(e,t,a=""){switch(a){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t}}function replaceRepeatFilledStarComputedWidth(e,t,a){var i=new RegExp("\\*\\|repeat_filled_stars_computed_width\\|\\*","g"),n=e.repeat_filled_stars_computed_formula;if(n){var r=n.replace("*|rating|*",t).replace("*|rating_floor|*",Math.floor(t));return r=evolute(r),a.replace(i,r)}return a}function getDate(e,t){var a="";if(-1!=e.indexOf("n")&&-1!=e.indexOf("j")&&-1!=e.indexOf("Y"))return a=(a=(a=e.replace("Y",t.getFullYear())).replace("n",t.getMonth()+1)).replace("j",t.getDate());var i=" ";-1!=e.indexOf("/")?i="/":-1!=e.indexOf(".")?i=".":-1!=e.indexOf("-")&&(i="-");for(var n=e.split(i),r=n.length,s=0;s<r;s++)-1!=n[s].indexOf("d")||-1!=n[s].indexOf("D")?a+=""==a?t.getDate()>9?t.getDate():"0"+t.getDate():i+(t.getDate()>9?t.getDate():"0"+t.getDate()):-1!=n[s].indexOf("m")||-1!=n[s].indexOf("M")?a+=""==a?t.getMonth()>8?t.getMonth()+1:"0"+(t.getMonth()+1):i+(t.getMonth()>8?t.getMonth()+1:"0"+(t.getMonth()+1)):-1==n[s].indexOf("y")&&-1==n[s].indexOf("Y")||(a+=""==a?t.getFullYear():i+t.getFullYear());return a}function isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function isIE(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1])}function getSealForReview(e){var t="standard";if(ratingRange(e,4.8,5.1))t="gold";else if(ratingRange(e,4.45,4.8))t="silver";else{if(!ratingRange(e,4,4.45))return t;t="bronze"}return t}function replaceReviewPlaceholders(e,t,a,i){var n=new RegExp("\\*\\|review_rating_grade\\|\\*","g"),r=new RegExp("Verified Customer","g"),s=new RegExp("\\*\\|review_seal_type\\|\\*","g"),l=new RegExp("\\*\\|review_rating_double\\|\\*","g"),o=getRatingGrade(0,e),d=getSealForReview(e),g="",c="Verified Customer";return null!=a.rating_grade_translated?g=a.rating_grade_translated[o]:null!=languageData[a.tpl][getPageLanguage(i)]&&languageData[a.tpl][getPageLanguage(i)].rating_grade_translated&&(g=languageData[a.tpl][getPageLanguage(i)].rating_grade_translated[o]),languageData[a.tpl]&&null!=languageData[a.tpl][getPageLanguage(i)]&&languageData[a.tpl][getPageLanguage(i)].verified_customer&&(c=languageData[a.tpl][getPageLanguage(i)].verified_customer),t=(t=(t=(t=t.replace(r,c)).replace(n,g)).replace(l,2*e)).replace(s,d)}function ratingRange(e,t,a){return e>=t&&e<a}function getDateFormat(e){var t="",a=e.indexOf("*|date_format_"),i=e.indexOf("|*",a);if(a>0){for(z=a+14;z<i;z++)t+=e[z];"xxxxx"===t&&(t="d.M.yyyy")}else t="d.M.yyyy";return t}function getStringBetween(e,t,a){var i=(e=" "+e).indexOf(t);if(0===i)return"";i+=t.length;var n=e.indexOf(a,i)-i;return e.substr(i,n)}function getRatingGrade(e,t){var a="";return ratingRange(t,4.8,5.1)&&e>=50||ratingRange(t,4.4,4.8)&&e>=50?a="excellent":ratingRange(t,4,4.4)&&e>=50?a="good":ratingRange(t,4,5.1)&&e<50?(a="good",ratingRange(t,4.45,5.1)&&(a="excellent")):ratingRange(t,0,4.1)&&e<50&&(a=""),a}function getSealType(e,t){var a="standard";if(ratingRange(t,4.8,5.1)&&e>=50)a="gold";else if(ratingRange(t,4.4,4.8)&&e>=50)a="silver";else if(ratingRange(t,4,4.4)&&e>=50)a="bronze";else if(ratingRange(t,4,5.1)&&e<50)a="neutral";else if(ratingRange(t,0,4.1)&&e<50)return a;return a}function translateText(e,t,a,i){a.attr("disabled","disabled"),null==i&&(i=null);var n=new FormData;return n.append("text",e),null!=i&&n.append("browser_language",i),n.append("crossDomain",!0),n.append("shop_id",window._customerId),fetch(window._ekomiWidgetsServerUrl+"/translate-data",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(i){var n=i.translate_text;t.addClass("text_translate_"+counter).html(n),t.after('<span class="trans_after trans_after_'+counter+'" hidden>'+n+"</span>"),t.after('<span class="trans_before trans_before_'+counter+'" hidden>'+e+"</span>"),counter++,a.removeAttr("disabled")})),""}function getWidgetContainer(e,t,a){var i=e("#widget-container");return a&&(e(".ekomi-widget-"+t+".div_"+(a=a.replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("#").join("-_hash_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus").replace("(","brkt").replace(")","brkt").replace("{","brkt").replace("}","brkt").replace("[","brkt").replace("]","brkt").split(":").join("-coln-"))).length?i=e(".ekomi-widget-"+t+".div_"+a):e(".ekomi-widget-"+t).length&&(i=e(".ekomi-widget-"+t))),i}!function(){window.ekomiWidgetJquery;var e,t=1,a=5e3,i="";e=void 0!==window._ekomiWidgetsServerUrl?window._ekomiWidgetsServerUrl:window._ekomiServerUrl;var n="https://sw-assets.ekomiapps.de/";null!=window._bucket&&(n="https://widgets.coddle.de/");var r=n+"data_files",s='<script id="google-rich-snippet-structured-data" type="application/ld+json">',l="<\/script>",o='<script type="application/ld+json">',d="<\/script>",g=["sf1083005a9426b0e5630","sf1083005a9426c23452c","sf1083005a84045d7445a","sf1083005a84016b3bc54","sf914485a0270efa05f1","sf1082605aa264256efa8","sf68945aba468f73234","sf37558599c3a89c9a73","sf3159259a52ab9d2aae","88954587dc1ce2e3c4","8895457d1574b3870b"],c={rating:0,empty_review_message:"No Reviews",rating_double:0,rating_floor:0,rating_grade:"",rating_grade_translated:"",filled_stars_computed_width:0,total_reviews_last_year:0,total_reviews:0,rating_percent:0,last_review_text:"",last_review_date:"0000-00-00 00:00:00",last_positive_review_text:"",second_last_positive_review_text:"",last_positive_review_date:"0000-00-00 00:00:00",seal_type:"standard",review_seal_type:"standard",ekomi_certificate_seo:"",positive_reviews_percentage:0,neutral_reviews_percentage:0,negative_reviews_percentage:0,widget_position:"bottom_left",date_format_xxxxx:"",today_date:"",your_company_name:"",review_title:"",review_text_title:"",review_date:"",review_time:"",review_text:"",review_rating:"",review_rating_double:"",shop_website:"",review_company_name:"",repeat_filled_stars_computed_width:0,review_pretty_datetime:"",total_positive_reviews:0,total_negative_reviews:0,total_neutral_reviews:0,random_postive_review_text:"",product_name:"",product_image_url:"",product_id:"","5_star_count":0,"5_star_percentage":0,"4_star_count":0,"4_star_percentage":0,"3_star_count":0,"3_star_percentage":0,"2_star_count":0,"2_star_percentage":0,"1_star_count":0,"1_star_percentage":0,rating_sff:0,total_reviews_sff:0,recommended_customers_percentage_sff:0,filled_stars_computed_width_sff:0,"5_star_count_sff":0,"5_star_percentage_sff":0,"4_star_count_sff":0,"4_star_percentage_sff":0,"3_star_count_sff":0,"3_star_percentage_sff":0,"2_star_count_sff":0,"2_star_percentage_sff":0,"1_star_count_sff":0,"1_star_percentage_sff":0,recommended_customers_percentage:0,user_reviews:"",slider_last_10_positive_reviews:"",carousel_slider_reviews:"",rating_group:0,total_reviews_group:0,filled_stars_computed_width_group:0,review_comment_text:"",comment_pretty_datetime:"",widget_social_like:[],widget_social_dislike:[],reviewer_firstname:"",reviewer_lastname:"",seal_type_group:"standard",rating_double_group:0,rating_percent_group:0,last_positive_review_text_group:"",review_images:""},_=!1;if((void 0===window._ekomiToken||m(window._ekomiToken,window._customerId))&&(void 0!==window._ekomiWidgetTokens&&window._ekomiWidgetTokens.forEach((function(e,t){m(e,window._customerId)||(_=!0)})),!_)){if(void 0===window.ekomiWidgetJqueryFile&&0==document.querySelectorAll('[data-ekomi-jquery-not-required="true"]').length&&(void 0===window.jQuery||window.jQuery.fn.jquery<"3.1.0")){window.ekomiWidgetJqueryFile=!0;var u=document.createElement("script");u.setAttribute("type","text/javascript"),u.setAttribute("src","https://sw-assets.ekomiapps.de/static_resources/jquery.min.js"),u.readyState?u.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||f()}:u.onload=f,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(u)}else window.ekomiWidgetJquery=window.jQuery,v();window.ekomiWidgetMain=v}function p(e,t){for(var a in e)if(e[a]===t)return a;return!1}function f(){if(window.ekomiWidgetJquery=window.jQuery.noConflict(!0),isIE()&&isIE()<=9){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://sw-assets.ekomiapps.de/static_resources/jquery.xdomainrequest.min.js"),e.readyState?e.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||v()}:v(),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)}else v()}function m(e,t){return null==e||(!e.includes("sf")||!e.split("sf")[1].indexOf(t,0))}function v(_=0,u=""){window.ekomiWidgetJquery(document).ready((function(f){var v=window._customerId;if(void 0!==window._ekomiToken&&w(window._ekomiToken),null==h)var h=[];function w(e){if(null!=e&&m(e,v))if(i=e,0!=e.indexOf("sf")){var t=r+"/mapping/default_mapping.json";void 0!==v&&""!==v&&(t=r+"/mapping/"+v+"_mapping.json");var a="";fetch(t).then((function(e){return 404==e.status?null:200==e.status&&e.ok?e.json():void 0})).then((function(t){if(null!=t){var n=t[e];if(void 0!==v&&""!==v){var r=n.length,s=window._language;if(void 0===s||""===s)null==n[0]?(a=n.new_token,v=n.customerId):(a=n[0].new_token,v=n[0].customerId);else for(var l=0;l<r;l++)n[l].language===s&&(a=n[l].new_token)}else a=n.new_token,v=n.customerId;k(a,v,i)}}))}else k(e,v,i)}function k(i,_,u){u!=i&&(null==document.getElementsByClassName("ekomi-widget-"+u)[0]?document.getElementById("widget-container").className+=" ekomi-widget-"+i:document.getElementsByClassName("ekomi-widget-"+u)[0].className+=" ekomi-widget-"+i),0!=f.inArray(i,g)&&function(i,g){function _(e){var t=e.html;return-1!=t.indexOf("google-rich-snippet-structured-data")&&(t=t.replace('<script id="google-rich-snippet-structured-data" type="application/ld+json">{"@context":"http://schema.org/","@type":"Service","aggregateRating":{"@type":"AggregateRating","ratingValue":"*|rating|*","bestRating":"5","reviewCount":"*|total_reviews|*"}}<\/script>',"")),t}function u(t,a){if(t&&a){"/"===e.slice(-1)&&(e=e.slice(0,-1));var i=e+"/update-widget-file/"+t+"?customerId="+a+"&domain="+window.location.hostname;fetch(i).then((function(e){})).then((function(e){}))}}function m(e,t){(null==e.ctime||null!=e.ctime&&Math.floor(Date.now()/1e3)>e.ctime)&&u(t,g)}function v(e,t,a){var i=_(e);k(e.css,a);var n=e.widget_data;(m(n,a),window.ekomiWidgetJquery('[data-ekomi-global-css-not-required="true"]').length||null!=n.global_css_not_required)||(window.widgetCssLoaded||(window.widgetCssLoaded=!0,f("<link>",{rel:"stylesheet",type:"text/css",href:"https://sw-assets.ekomiapps.de/static_resources/widget.css"}).appendTo("head")));if(null!=n.demoWidget)(r=document.createElement("script")).src="https://sw-assets.ekomiapps.de/static_resources/demo.js",null!=window._bucket&&(r.src="https://widgets.coddle.de/static_resources/demo-unminified.js"),r.onload=function(){replaceDefaultDummyValues(n,a,t,i,n.demoWidgetRatingValue)},document.head.appendChild(r);else if(null!=n.load_from_widget&&665==g){var r;if("undefined"==typeof ekomiWidgetFJs)ekomiWidgetFJs=!0,(r=document.createElement("script")).src="https://sw-assets.ekomiapps.de/static_resources/g-widget.js",null!=window._bucket&&(r.src="https://widgets.coddle.de/static_resources/unminified-g-widget.js"),r.onload=function(){loadOldWidget(a,t)},document.head.appendChild(r);else loadOldWidget(a,t)}else A(i,n,t,a)}function h(e,a){if(null!=tokenFileData[a]&&"loading"!=tokenFileData[a])v(tokenFileData[a],e,a);else if("loading"==tokenFileData[a])setTimeout((function(){h(e,a)}),1e3);else{var i=r+"/widget/"+a+".json";tokenFileData[a]="loading",fetch(i).then((function(e){if(404==e.status){if(widgetFileCount[a]>=t)return;return widgetFileCount[a]=widgetFileCount[a]+1,y(a,g),null}if(200==e.status&&e.ok)return e.json()})).then((function(t){if(null!==t){var i=t;if(tokenFileData[a]=i,null!=i.widget_data.dynamic_content&&null!=i.widget_data.tpl){var n=getPageLanguage(a);w(i,a,e,n)}else v(i,e,a)}}))}}function w(e,t,a,i){var r=e.widget_data.tpl,s=n+"resources/language/"+r+"_"+i+".json";null==languageData[r]&&(languageData[r]=[]),"loading"==languageData[r][i]?setTimeout((function(){w(e,t,a,i)}),1e3):(languageData[r][i]="loading",fetch(s).then((function(n){return 404==n.status?(q(r,i),w(e,t,a,fallBackLanguage),null):200==n.status&&n.ok?n.json():void 0})).then((function(n){e.translations&&(n=Object.assign(n,e.translations[i])),languageData[r][i]=n;var s=e.html,l=e.css,o=languageData[r][i];for(var d in o)if(o.hasOwnProperty(d)&&"rating_grade_translated"!=d){var g=new RegExp("\\*\\|"+d+"\\|\\*","g");s=s.replace(g,o[d]);var c=new RegExp("{{"+d+"}}","g");l=l.replace(c,o[d]),s=s.replace(c,o[d])}e.html=s,e.css=l,v(e,a,t)})))}function k(e,t){var a=e,i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");document.querySelector(".sw-css-"+t)||(i.appendChild(n),n.type="text/css",n.className="eKomi-widget-css sw-css-"+t,n.styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a)))}function y(e,t){if(e&&t){null!=deletedFileCreatedData[t]&&x(e,t),null!=deletedFileData[t]&&0==(-1!=f.inArray(e,deletedFileData[t]))&&x(e,t);fetch(r+"/json/"+t+"_deletedWidgets.json").then((function(a){if(404==a.status)deletedFileCreatedData[t]=1,x(e,t);else if(200==a.status&&a.ok)return a.json()})).then((function(a){if(null!=a){var i=[];try{deletedFileData[t]=a}catch(e){}0==(-1!=f.inArray(e,i))&&x(e,t)}}))}}function x(t,i){t&&i&&("/"===e.slice(-1)&&(e=e.slice(0,-1)),fetch(e+"/update-widget-file/"+t+"?customerId="+i).then((function(e){})).then((function(e){setTimeout((function(){h(oe,t)}),a)})))}function j(e,t,a){var i=t.includes("*|paginate|*");for(var n in c)if(c.hasOwnProperty(n)){var r=new RegExp("\\*\\|"+n+"\\|\\*","g");t!=(t=t.replace(r,c[n]))&&!0}r=new RegExp("\\*\\|comment_text\\|\\*","g");t=t.replace(r,'<com class="comment_div_hidden"></com>');var s=new RegExp("\\*\\|(.*?)\\|\\*","g");t=t.replace(s,"");for(var l=f("#widget-container"),o=a.split(",").sort(),d=".div_count_"+o.length,_=0;_<o.length;_++){d+=".div_"+o[_].replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("#").join("-_hash_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus")}f(d+".ekomi-widget-"+e).length?l=f(d+".ekomi-widget-"+e):f(".ekomi-widget-"+e).length&&(l=f(".ekomi-widget-"+e)),l.html(t),null!=tokenFileData[e].widget_data.hideWidgetIfNoReviews&&0==l.find(".hd_total_reviews").data("val")&&l.hide(),l.find(".comment_div_hidden").each((function(){ekomiWidgetJquery(this).parents("comment_repeat").remove()}));var u=p(productIdsFileData[g],a);(tokenFileData[e].widget_data.is_lp||tokenFileData[e].widget_data.is_cp||i)&&R(l,e,a,u)}function D(e,t,a){for(var i=1;i<=5;i++){var n=e.find("filterisstar_"+i).html();e.find("filterisstar_"+i).before('<a href="javascript:" data-filter-type="filterisstar" data-filter="'+i+'" class="ratingFilterLP LP_filters ekomi_widget_filter_star">'+n+"</a>"),e.find("filterisstar_"+i).remove()}f(".ratingFilterLP").click((function(){currentPageInPagination=1,e.find(".LP_filters").removeClass("ekomi-star-filter-active"),f(this).addClass("ekomi-star-filter-active");var i=null,n=null,r=f(this).data("filter");S(0,t,e,i,n,r,a)}))}function F(e,t,a){var i=tokenFileData[t].widget_data.lp_translations;null==i&&null!=languageData[tokenFileData[t].widget_data.tpl][getPageLanguage(t)]&&languageData[tokenFileData[t].widget_data.tpl][getPageLanguage(t)].lp_translations&&(i=languageData[tokenFileData[t].widget_data.tpl][getPageLanguage(t)].lp_translations),e.find(".reviews").before('<div class="filter-content"><div class="filter-heading"><span class="title-section-inner">'+i["evaluation and review"]+'</span></div><div class="controls"><ul><li class="sort chronological_filter active LP_filters" data-filter-type="filterischronological" data-sort-direction="desc"><span>'+i["newest first"]+'</span></li><li class="sort chronological_filter LP_filters" data-filter-type="filterischronological" data-sort-direction="asc"><span>'+i["oldest first"]+'</span></li><li class="sort rating_filter LP_filters" data-filter-type="filterisrating" data-sort-rating-direction="desc"> <span>'+i["in descending order of evaluation"]+'</span></li><li class="sort rating_filter LP_filters" data-filter-type="filterisrating" data-sort-rating-direction="asc"><span>'+i["in ascending order of evaluation"]+'</span></li><li class="sort length_filter LP_filters" data-reviews-length="10" data-sort-rating-direction="asc"><span>'+i["most pertinent"]+"</span></li></ul></div></div>"),f(document).on("click",".chronological_filter",(function(){if(!f(this).hasClass("active")){currentPageInPagination=1,e.find(".LP_filters").removeClass("ekomi-star-filter-active"),f(this).addClass("ekomi-star-filter-active"),e.find(".LP_filters").removeClass("active"),f(this).addClass("active");var i=f(this).data("sort-direction");S(0,t,e,i,null,null,a)}})),f(document).on("click",".rating_filter",(function(){if(!f(this).hasClass("active")){currentPageInPagination=1,e.find(".LP_filters").removeClass("ekomi-star-filter-active"),f(this).addClass("ekomi-star-filter-active"),e.find(".LP_filters").removeClass("active"),f(this).addClass("active");var i=f(this).data("sort-rating-direction");S(0,t,e,null,i,null,a)}})),f(document).on("click",".length_filter",(function(){if(!f(this).hasClass("active")){currentPageInPagination=1,e.find(".LP_filters").removeClass("ekomi-star-filter-active"),f(this).addClass("ekomi-star-filter-active"),e.find(".LP_filters").removeClass("active"),f(this).addClass("active");var i=f(this).data("sort-rating-direction"),n=f(this).data("reviews-length");S(0,t,e,null,i,null,a,n)}}))}function P(){document.querySelector("ul.pagination").id="paginator";var e=document.querySelectorAll("#paginator li"),t=[];for(let a=0;a<e.length;a++)e[a].classList.contains("active")?(t[a]=!1,null!=e[a].nextSibling&&(t[a+a]=!1),null!=e[a].previousSibling&&(t[a+a]=!1)):null!=e[a].nextSibling&&e[a].nextSibling.classList.contains("active")||null!=e[a].previousSibling&&e[a].previousSibling.classList.contains("active")?t[a]=!1:t[a]=!0;for(let a=0;a<e.length;a++)t[a]&&e[a].remove();"undefined"!=typeof setWidgetPagination&&setWidgetPagination()}function b(e,t,a,i,n,s,l,o,d,c){var _="",u=5;o?(totalPageLinks=1==d?1*c+u:totalPageLinks,isForward&&(totalPageLinks=0==d?totalPageLinks-lastDifferenceFactor+1:totalPageLinks,currentMaxToSkip=currentMaxToSkip-lastDifferenceFactor*l+l),(totalPageLinks=totalPageLinks<=i?i+1:totalPageLinks)>a&&(totalPageLinks=a+1),s>a&&(s=a)):(totalPageLinks=1==d&&s>=i?c-u:totalPageLinks,1==d&&(totalPageLinks=s>=i?c-u:c-1),isForward||(totalPageLinks=0==d?totalPageLinks+lastDifferenceFactor-1:totalPageLinks,currentMaxToSkip=currentMaxToSkip+lastDifferenceFactor*l-l),totalPageLinks+s>a&&(totalPageLinks=a-(s=a>i?i:a-totalPageLinks)),a<=i&&(totalPageLinks=0,currentMaxToSkip=0,s=a));for(var p=1;p<=s;p++){var m="";o?(totalPageLinks--,d&&totalPageLinks==c&&(m="active"),_='<li class="'+m+'"><a href="javascript:" class="page_link" data-page-link="'+totalPageLinks+'" data-skip="'+(currentMaxToSkip=(totalPageLinks-1)*l)+'">'+totalPageLinks+"</a></li>"+_):(totalPageLinks++,d&&totalPageLinks==c&&(m="active"),_+='<li class="'+m+'"><a href="javascript:" class="page_link" data-page-link="'+totalPageLinks+'" data-skip="'+(currentMaxToSkip=(totalPageLinks-1)*l)+'">'+totalPageLinks+"</a></li>")}return isForward=!o,lastDifferenceFactor=s,f(document).off("click",".page_link").on("click",".page_link",(function(){var a=f(this).data("skip");currentPageInPagination=f(this).data("page-link");var i=null,r=null,s=null;ekomiWidgetJquery(".rating_filter.ekomi-star-filter-active").length&&(i=ekomiWidgetJquery(".rating_filter.ekomi-star-filter-active").data("sort-rating-direction")),ekomiWidgetJquery(".chronological_filter.ekomi-star-filter-active").length&&(r=ekomiWidgetJquery(".chronological_filter.ekomi-star-filter-active").data("sort-direction")),ekomiWidgetJquery(".ratingFilterLP.ekomi-star-filter-active").length&&(s=ekomiWidgetJquery(".ratingFilterLP.ekomi-star-filter-active").data("filter")),S(a,n,t,r,i,s,e)})),f(document).off("click",".page_link_dots_forward").on("click",".page_link_dots_forward",(function(e){e.stopPropagation(),e.preventDefault(),f(".btm-pagination.nav-pagination nav ul li.active").next().find(".page_link").trigger("click")})),f(document).off("click",".page_link_dots_backward").on("click",".page_link_dots_backward",(function(){f(".btm-pagination.nav-pagination nav ul li.active").prev().find(".page_link").trigger("click")})),f(document).off("click",".page_link_dots_full_forward").on("click",".page_link_dots_full_forward",(function(){var a=summaryFileData[r+"/json/"+g+"_seller_summary.json"].total_reviews,s=tokenFileData[n].html.match(/<repeat_[^>]+>/i)[0].match(/\d+/)[0],l=Math.ceil(a/s);currentMaxToSkip=(l-i)*s,totalPageLinks=l-i+1,isForward=!1;var o=b(e,t,l,i,n,l<=i?l:i,s,!1,!1);f(".nav-pagination ul.pagination").html(o),f(".nav-pagination ul.pagination li:last-child").find(".page_link").trigger("click")})),_}function L(e,t,a,i){ekomiWidgetJquery(".nav-pagination").remove();var n=tokenFileData[a].widget_data.lp_translations;null==n&&null!=languageData[tokenFileData[a].widget_data.tpl][getPageLanguage(a)]&&languageData[tokenFileData[a].widget_data.tpl][getPageLanguage(a)].lp_translations&&(n=languageData[tokenFileData[a].widget_data.tpl][getPageLanguage(a)].lp_translations);var r=tokenFileData[a].html,s=r.match(/<repeat_[^>]+>/i)[0].match(/\d+/)[0],l=Math.ceil(e/s),o=9;lastDifferenceFactor=o;var d=n["full backward arrow"],g=n.previous,c=n.next,_=(n["single forward arrow"],n["single backward arrow"],n["full forward arrow"]),u=!1;-1!==r.indexOf("full_first_last_links")&&currentPageInPagination>1&&(u=!0);var p=l<=o?l:o,m=b(i,t,l,o,a,p,s,!0,!0,currentPageInPagination),v="",h='<li class="previous" style="display:none;"><a href="javascript:" class="previous page_link_dots_full_backward" style="display:none;">'+d+"</a></li>";u&&(h='<li class="previous"><a href="javascript:" class="previous page_link_dots_full_backward">'+d+"</a></li>");var w='<div class="col-md-3 col-xs-3"><ul class="pre-next">'+h+'<li class="previous"><a href="javascript:" class="previous page_link_dots_backward" style="display:none;">'+g+"</a></li></ul></div>";if(p>1){var k='<li class="next"><a href="javascript:" class="next page_link_dots_full_forward" style="display:none;">'+_+"</a></li>";u&&(k='<li class="next"><a href="javascript:" class="next page_link_dots_full_forward">'+_+"</a></li>"),v='<div class="col-md-3 col-xs-3"><ul class="pre-next"><li class="next"><a href="javascript:" class="next page_link_dots_forward">'+c+"</a></li>"+k+"</ul></div>"}f(".reviews").after('<div class="btm-pagination text-center nav-pagination clearfix">'+w+'<div class="col-md-6 col-xs-6"><nav aria-label="Page navigation"><ul class="pagination">'+m+"</ul></nav></div>"+v+"</div>"),currentPageInPagination>1?f(".page_link_dots_backward").show():f(".page_link_dots_backward").hide(),currentPageInPagination==l?f(".page_link_dots_forward").hide():f(".page_link_dots_forward").show(),void 0!==tokenFileData[a].widget_data&&void 0!==tokenFileData[a].widget_data.is_cp&&tokenFileData[a].widget_data.is_cp&&P(),"undefined"!=typeof setWidgetPagination&&setWidgetPagination()}function R(e,t,a,i){if(F(e,t,a),D(e,t,a),a)if(null!=tokenFileData[t].widget_data.lite_service)if(Array.isArray(tokenFileData[t].widget_data.lite_service))var n=r+"/product/"+g+"/"+i+"_"+tokenFileData[t].widget_data.lite_service[0]+"/summary.json";else n=r+"/product/"+g+"/"+i+"_"+tokenFileData[t].widget_data.lite_service+"/summary.json";else n=r+"/product/"+g+"/"+i+"/summary.json";else if(null!=tokenFileData[t].widget_data.lite_service)n=null!=tokenFileData[t].widget_data.prioritized_tpl?r+"/json/"+g+"_"+tokenFileData[t].widget_data.prioritized_tpl+"_"+tokenFileData[t].widget_data.lite_service+"_summary.json":Array.isArray(tokenFileData[t].widget_data.lite_service)?r+"/json/"+g+"_"+tokenFileData[t].widget_data.lite_service[0]+"_summary.json":r+"/json/"+g+"_"+tokenFileData[t].widget_data.lite_service+"_summary.json";else n=r+"/json/"+g+"_seller_summary.json";L(summaryFileData[n].total_reviews,e,t,a),f(document).find(".nav-pagination").before('<div id="spinner" class="spinner" style="display: none;"><img class="img-spinner" src="'+smartWidgetsServerBaseUrl+'/resources/images/default.svg" alt="Loading"></div>')}function S(e,t,a,i,n,r,s,l=null){var o=tokenFileData[t].html,d=o.match(/<repeat_[^>]+>/i),g=d[0].match(/\d+/)[0],c=d[0].match(/(?:_[a-zA-Z]+)*_/i)[0].replace(/_/g,""),_=tokenFileData[t].widget_data;f("#spinner").show();var u=[],p={widgetToken:t,crossDomain:!0,dataType:"jsonp",productId:s,lastShown:e,required:g,sortDirection:i,orderByRating:n,filterRating:r,reviewsLength:l,returnTotal:!0,language:getPageLanguage(t)};for(var m in p)p.hasOwnProperty(m)&&p[m]&&u.push(m+"="+encodeURIComponent(p[m]));var v=smartWidgetsServerBaseUrl+"/get-more-reviews?"+u.join("&");fetch(v).then((function(e){return 404==e.status?(j(t,o,s),T(data,s,t),null):200==e.status&&e.ok?e.json():void 0})).then((function(e){if(null!==e){var i=e,n=d[0],r="</repeat";c&&"random"!=c&&(r+="_"+c),g&&(r+="_"+g),r+=">",-1==o.indexOf(r)&&(r="</repeat>");for(var s=getStringBetween(tokenFileData[t].html,n,r),l=getDateFormat(s),u="",p=i.length>0?i[0].total_reviews:0,m=0;m<g&&m<i.length;m++){var v=i[m],h=s;for(var w in v){if("review_rating"==w||"rating"==w||"review_rating_double"==w)h=replaceRepeatFilledStarComputedWidth(_,v[w],h),h=replaceReviewPlaceholders(v[w],h,_,t),F=new RegExp("\\*\\|rating\\|\\*","g"),h=h.replace(F,v[w]),F=new RegExp("\\*\\|review_rating\\|\\*","g"),h=h.replace(F,v[w]),F=new RegExp("\\*\\|review_rating_double\\|\\*","g"),h=h.replace(F,v[w]);else if("review_date"==w){var k=new Date(v[w]);if(isSafari()){var y=v[w].split(" ").join("T");k=new Date(y)}v[w]=getDate(l,k);var x=k.getHours()+":"+(k.getMinutes()<10?"0"+k.getMinutes():k.getMinutes()),j=new RegExp("\\*\\|review_time\\|\\*","g");h=h.replace(j,x);var D=new RegExp("\\*\\|review_date_only\\|\\*","g");h=h.replace(D,getDate(getDateFormat(o),k))}var F=new RegExp("\\*\\|"+w+"\\|\\*","g");h=h.replace(F,v[w])}u+=h}""==u&&(u="*|empty_review_message|*");F=new RegExp("\\*\\|comment_text\\|\\*","g");u=u.replace(F,'<com class="comment_div_hidden"></com>');var P=new RegExp("\\*\\|(.*?)\\|\\*","g");u=u.replace(P,""),f(".reviews").html(u),f(".reviews").find(".comment_div_hidden").each((function(){ekomiWidgetJquery(this).parents("comment_repeat").remove()})),L(p,a,t),f("#spinner").hide()}}))}function E(e){return e<41?33:e<46?41:e<56?46:e<66?56:e<72?66:e<74?72:e<81?74:e<90?81:e<105?90:e<150?105:e<232?150:e<500?232:500}function O(e,t,a,c,_,u,p){var m=!1;if((null!=_.is_rich||null!=_.is_rich_with_reviews||null!=_.is_local_business)&&null!=e&&e.total_reviews>0){var v=c;if(null!=schemaData[g]&&null!=schemaData[g][v])void 0!==_.is_rich_with_reviews?a+=s+schemaData[g][v].rich_snippet_with_reviews+l:void 0!==_.is_rich&&(a+=s+schemaData[g][v].rich_snippet+l),void 0!==_.is_local_business&&(a+=s+schemaData[g][v].local_business+l);else{m=!0;var h=r+"/json/"+g+"_schema.json";null!=_.lite_service&&(h=null!=_.prioritized_tpl?r+"/json/"+g+"_"+_.prioritized_tpl+"_"+_.lite_service+"_schema.json":r+"/json/"+g+"_"+_.lite_service+"_schema.json"),f(".data-ekomi-emp").length&&c&&(h=r+"/product/"+g+"/"+p+"/schema.json"),fetch(h).then((function(e){return 404==e.status?null:200==e.status&&e.ok?e.json():void 0})).then((function(i){if(null!==i){if(null==schemaData[g]&&(schemaData[g]=[]),null!=window._schema_fields){var n=window._schema_fields;if(null!=i.rich_snippet){var r=JSON.parse(i.rich_snippet);for(var f in n)n.hasOwnProperty(f)&&(r[f]=n[f]);i.rich_snippet=JSON.stringify(r)}if(null!=i.rich_snippet_with_reviews){var m=JSON.parse(i.rich_snippet_with_reviews);for(var f in n)n.hasOwnProperty(f)&&(m[f]=n[f]);i.rich_snippet_with_reviews=JSON.stringify(m)}}if(schemaData[g][v]=i,void 0!==_.is_rich&&void 0!==_.is_local_business&&null!=i.rich_snippet)try{var h=JSON.parse(i.local_business),w=JSON.parse(i.rich_snippet);h.aggregateRating=w.aggregateRating,a+=o+JSON.stringify(h)+d}catch(e){void 0!==_.is_rich_with_reviews&&null!=i.rich_snippet_with_reviews?a+=s+i.rich_snippet_with_reviews+l:void 0!==_.is_rich&&null!=i.rich_snippet&&(a+=s+i.rich_snippet+l),void 0!==_.is_local_business&&(a+=o+i.local_business+d)}else if(void 0!==_.is_rich_with_reviews&&void 0!==_.is_local_business&&null!=i.rich_snippet_with_reviews)try{h=JSON.parse(i.local_business);var k=JSON.parse(i.rich_snippet_with_reviews);h.aggregateRating=k.aggregateRating,h.review=k.review,a+=o+JSON.stringify(h)+d}catch(e){void 0!==_.is_rich_with_reviews&&null!=i.rich_snippet_with_reviews?a+=s+i.rich_snippet_with_reviews+l:void 0!==_.is_rich&&null!=i.rich_snippet&&(a+=s+i.rich_snippet+l),void 0!==_.is_local_business&&(a+=o+i.local_business+d)}else void 0!==_.is_rich_with_reviews&&null!=i.rich_snippet_with_reviews?a+=s+i.rich_snippet_with_reviews+l:void 0!==_.is_rich&&null!=i.rich_snippet&&(a+=s+i.rich_snippet+l),void 0!==_.is_local_business&&(a+=o+i.local_business+d)}null==e&&j(t,a,c),se(t,e,_,a,u,c,p),setTimeout((function(){"undefined"!=typeof callAfterWidgetRender&&callAfterWidgetRender()}),1e3)}))}}if(null!=_.lite_service_hash||null!=_.lite_service){var w=a.match(/<social_repeat/i),k=!1;if(null!=w&&void 0!==w[0])for(var y=getStringBetween(a,"<social_repeat>","</social_repeat>"),x="",D=0;D<_.lite_service.length;D++){var F=e[_.lite_service[D]],P=y,b=new RegExp("\\*\\|current_social_item_number\\|\\*","g");for(var L in P=P.replace(b,D),b=new RegExp("\\*\\|social_logo\\|\\*","g"),P=P.replace(b,n+"resources/social_"+_.lite_service[D]+".png"),b=new RegExp("\\*\\|social_slug\\|\\*","g"),P=P.replace(b,_.lite_service[D]),F)F.hasOwnProperty(L)&&(b=new RegExp("\\*\\|"+L+"\\|\\*","g"),void 0!==L[0]&&"<"==L[0]&&(b=new RegExp(L,"g")),P=P.replace(b,F[L]));x+=P}else k=!0;var R="<social_repeat>"+y+"</social_repeat>";a=a.replace(R,x);var S=f("#widget-container");if(f(".ekomi-widget-"+t+".div_"+c).length?S=f(".ekomi-widget-"+t+".div_"+c):f(".ekomi-widget-"+t).length&&(S=f(".ekomi-widget-"+t)),S.html(a),null!=tokenFileData[t].widget_data.hideWidgetIfNoReviews&&0==S.find(".hd_total_reviews").data("val")&&S.hide(),j(t,a,oe),!k)return}null!=_.enable_google_tracking&&(a+=W(t)),m||(null==e&&j(t,a,c),se(t,e,_,a,u,c,p)),_.qa_enable&&C(i,c)}function W(e){return"<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-2S5RGNGSQW\"><\/script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-2S5RGNGSQW');gtag('event', 'event_widget_hits', {'event_category' : 'category_widget_hits','event_label' : '"+e+"','value': 1});<\/script>"}function C(e,t){var a=smartWidgetsServerBaseUrl+"/get-question-answer";a=a+"?widget_token="+e+"&product_id="+t,fetch(a).then((e=>e.text())).then((e=>{null!=e&&f("#widget-container").append(e)}))}function T(e,t,a){if(null!=e&&null!=e.enableSeal){var i=f("#widget-container");if(f(".ekomi-widget-"+a+".div_"+t).length?i=f(".ekomi-widget-"+a+".div_"+t):f(".ekomi-widget-"+a).length&&(i=f(".ekomi-widget-"+a)),null!=e.doHideWidget&&e.doHideWidget)i.hide();else{var r=0;i.children().each((function(){r+=ekomiWidgetJquery(this).outerHeight(!0)}));var s=E(r),l='<img src="'+n+"resources/en_seal_standard-"+s+'.png">';i.html(l)}}}function I(e,t,a,i,n,r,s){if(null!=summaryFileData[e]&&"loading"!=summaryFileData[e]){var l=summaryFileData[e];-1!=e.indexOf("combined_summary")&&(l=summaryFileData[e][s]),O(l,n,t,i,a,r,s)}else"loading"==summaryFileData[e]?setTimeout((function(){I(e,t,a,i,n,r,s)}),1e3):(summaryFileData[e]="loading",fetch(e).then((function(e){return 404==e.status?(j(n,t,i),null):200==e.status&&e.ok?e.json():void 0})).then((function(l){null!=l&&(summaryFileData[e]=l,-1!=e.indexOf("combined_summary")&&(l=l[s]),O(l,n,t,i,a,r,s))})))}function M(t,a){if(-1!=t.indexOf(",")){var i=e+"/create-product-file-hash",n=new FormData;n.append("shop_id",a),n.append("product_id",t),fetch(i,{method:"POST",body:n})}}function q(t,a){var i=e+"/create-template-translation",n=new FormData;n.append("template_id",t),n.append("language",a),fetch(i,{method:"POST",body:n})}function J(e,t,a,i,n,r){window.c1++;var s=smartWidgetsServerBaseUrl+"/g_f_n_f_p?shop_id="+t+"&hash="+e;1==window.c1?B(s,e,t,a,i,n,r):setTimeout((function(){B(s,e,t,a,i,n,r)}),2e3)}function B(e,t,a,i,n,s,l){for(var o in hashProductIdsData)for(var d in hashProductIdsData[o])if(d==t){jsonLink=1==o?r+"/product/"+a+"/combined_summary.json":r+"/product/"+a+"/combined_summary_"+o+".json",I(jsonLink,i,n,s,l,!1,t);break}}function N(e,t,a,i){for(var n=a.split(",").sort(),s=".div_count_"+n.length,l=0;l<n.length;l++){s+=".div_"+n[l].replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("#").join("-_hash_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus")}var o=f(s+".ekomi-widget-"+i);if(o.hasClass("data-ekomi-emp")){var d=r+"/product/"+g+"/productIdsHash.json";if(null!=productIdsFileData[g]&&"loading"!=productIdsFileData[g]){var c=p(productIdsFileData[g],a);if(0==c)M(a,g),j(i,e,a),f(".data-ekomi-emp").length&&a&&o.removeClass("data-ekomi-emp");else{var _=c;void 0!==t.lite_service?(jsonLink=r+"/product/"+g+"/"+_+"_"+t.lite_service+"/summary.json",I(jsonLink,e,t,a,i,!1,_)):void 0!==t.sff_form_hash?(jsonLink=r+"/product/"+g+"/"+t.sff_form_hash+"_"+_+"/summary.json",I(jsonLink,e,t,a,i,!1,_)):null!=t.load_from_widget&&f(".ekomi-widget-"+i).length>1||null!=t.load_combined_summary&&f(".ekomi-widget-"+i).length>1?J(_,g,e,t,a,i):null!=t.group_shops_hash?(jsonLink=r+"/group/product/"+g+"/"+_+"/"+t.group_shops_hash+"_summary.json",I(jsonLink,e,t,a,i,!0,_)):(jsonLink=r+"/product/"+g+"/"+_+"/summary.json",I(jsonLink,e,t,a,i,!1,_))}}else if("loading"==productIdsFileData[g])setTimeout((function(){N(e,t,a,i)}),2e3);else{productIdsFileData[g]="loading",fetch(d).then((function(e){if(404==e.status)null;else if(200==e.status&&e.ok)return e.json()})).then((function(n){if(null!==n){var s=null;for(var l in hashProductIdsData=n,n)s=Object.assign({},n[l],s);n=s,productIdsFileData[g]=n;var o=p(n,a);if(0==o){if(M(a,g),j(i,e,a),f(".data-ekomi-emp").length&&a){for(var d=a.split(",").sort(),c=".div_count_"+d.length,_=0;_<d.length;_++){c+=".div_"+d[_].replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("#").join("-_hash_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus")}f(c+".ekomi-widget-"+i).removeClass("data-ekomi-emp")}}else{var u=o;void 0!==t.lite_service?(jsonLink=r+"/product/"+g+"/"+u+"_"+t.lite_service+"/summary.json",I(jsonLink,e,t,a,i,!1,u)):void 0!==t.sff_form_hash?(jsonLink=r+"/product/"+g+"/"+t.sff_form_hash+"_"+u+"/summary.json",I(jsonLink,e,t,a,i,!1,u)):null!=t.load_from_widget&&f(".ekomi-widget-"+i).length>1||null!=t.load_combined_summary&&f(".ekomi-widget-"+i).length>1?J(u,g,e,t,a,i):null!=t.group_shops_hash?(jsonLink=r+"/group/product/"+g+"/"+u+"/"+t.group_shops_hash+"_summary.json",I(jsonLink,e,t,a,i,!0,u)):(jsonLink=r+"/product/"+g+"/"+u+"/summary.json",I(jsonLink,e,t,a,i,!1,u))}}}))}}}function A(e,t,a,i){var n=r+"/json/"+g+"_seller_summary.json";if(null!=t.lite_service_hash?n=r+"/json/"+g+"_"+t.lite_service_hash+"_summary.json":null!=t.lite_service&&(n=null!=t.prioritized_tpl?r+"/json/"+g+"_"+t.prioritized_tpl+"_"+t.lite_service+"_summary.json":Array.isArray(t.lite_service)?r+"/json/"+g+"_"+t.lite_service[0]+"_summary.json":r+"/json/"+g+"_"+t.lite_service+"_summary.json"),null!=t.srr_hash&&(n=r+"/json/"+g+"_"+t.srr_hash+"_summary.json"),null==t.group_shops_hash||a)if(f(".data-ekomi-emp").length&&a){if(-1==a.indexOf(","))return N(e,t,a,i);var s=new FormData;s.append("pid",a),fetch(smartWidgetsServerBaseUrl+"/cnv.php",{method:"POST",body:s}).then((function(e){return e.json()})).then((function(a){N(e,t,a.join(","),i)})).catch((function(n){ce=a.split(",").sort().sort((function(e,t){return e>t})),a=ce.join(","),N(e,t,a,i)}))}else if(!f(".data-ekomi-emp").length&&a);else if(f(".data-ekomi-emp").length||null==t.product_widget)I(n,e,t,a,i,!1,null);else{I(n=r+"/product/"+g+"/summary.json",e,t,a,i,!1,null)}else I(n=r+"/group/"+t.group_shops_hash+"_summary.json",e,t,a,i,!0,null)}function z(e,t,a,i,n,s,l,o){var d=s[0].match(/(?:_[a-zA-Z]+)*_/i)[0].replace(/_/g,""),c=s[0].match(/\d+/)[0],_=s[0];""==d&&(d="random");var u="";u=void 0!==a.sff_form_hash?r+"/product/"+g+"/"+a.sff_form_hash+"_"+n+"/"+d+"_1.json":null==a.group_shops_hash||i?i?void 0!==a.lite_service?r+"/product/"+g+"/"+n+"_"+a.lite_service+"/"+d+"_1.json":null!=a.group_shops_hash?r+"/group/product/"+g+"/"+n+"/"+a.group_shops_hash+"_"+d+"_1.json":r+"/product/"+g+"/"+n+"/"+d+"_1.json":null!=a.lite_service&&null!=a.prioritized_tpl?r+"/json/"+g+"_"+a.prioritized_tpl+"_"+a.lite_service+"_"+d+"_1.json":null!=a.lite_service?r+"/json/"+g+"_"+a.lite_service+"_"+d+"_1.json":null!=a.product_widget?r+"/product/"+g+"/"+d+"_1.json":r+"/json/"+g+"_"+d+"_1.json":r+"/group/"+a.group_shops_hash+"_"+d+"_1.json",fetch(u).then((function(a){return 404==a.status?(j(o,t,i),T(e,i,o),null):200==a.status&&a.ok?a.json():void 0})).then((function(n){if(null!==n)try{var r=n;if(null==r)return t;var s="",g="</repeat";d&&"random"!=d&&(g+="_"+d),c&&(g+="_"+c),g+=">",-1==t.indexOf(g)&&(g="</repeat>");for(var u=getStringBetween(t,_,g),p=getDateFormat(u),f=0;f<c&&f<r.length;f++){var m=r[f],v=u;for(var h in m){if("review_rating"==h)v=replaceRepeatFilledStarComputedWidth(a,m[h],v),v=replaceReviewPlaceholders(m[h],v,a,o);else if("review_date"==h){if(U(m[h]))var w=new Date(1e3*m[h]);else if(isSafari()){var k=G(m[h]).split("-").join("/");w=new Date(k)}else w=new Date(G(m[h]));m[h]=getDate(p,w);var y=w.getHours()+":"+(w.getMinutes()<10?"0"+w.getMinutes():w.getMinutes()),x=new RegExp("\\*\\|review_time\\|\\*","g");v=v.replace(x,y);var j=new RegExp("\\*\\|review_date_only\\|\\*","g");v=v.replace(j,getDate(getDateFormat(t),w))}var D=new RegExp("\\*\\|"+h+"\\|\\*","g");v=v.replace(D,m[h])}s+=v}""==s&&(s="*|empty_review_message|*");var F=_+u+g;t=t.replace(F,s),re(e,t,a,l,o),T(e,i,o)}catch(e){}}))}function U(e){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)}function G(e){var t=" ";-1!=e.indexOf("/")?t="/":-1!=e.indexOf(".")?t=".":-1!=e.indexOf("-")&&(t="-");var a=e.split(t),i=a[0],n=a[1];return a[2].split(" ")[0].trim()+"-"+n+"-"+i+" "+a[2].split(" ")[1].split(":")[0].trim()+":"+a[2].split(" ")[1].split(":")[1].trim()}function V(e){if(-1==e.indexOf("*|today_date|*"))return e;var t=getDate(getDateFormat(e),new Date),a=new RegExp("\\*\\|today_date\\|\\*","g");return e.replace(a,t)}function H(e,t){if(-1==e.indexOf("*|token|*"))return e;var a=new RegExp("\\*\\|token\\|\\*","g");return e.replace(a,t)}function Q(e,t){if(-1==e.indexOf("*|product_id|*"))return e;var a=new RegExp("\\*\\|product_id\\|\\*","g");return e.replace(a,t)}function Y(e,t){if(-1==e.indexOf("*|widget_position|*"))return e;var a=new RegExp("\\*\\|widget_position\\|\\*","g");return e.replace(a,t.widget_position)}function K(e,t){if(-1==e.indexOf("*|widget_event|*"))return e;var a=new RegExp("\\*\\|widget_event\\|\\*","g");return e.replace(a,t.widget_event)}function Z(e,t){if(-1==e.indexOf("*|slider_data_source_html|*"))return e;var a=new RegExp("\\*\\|slider_data_source_html\\|\\*","g");return e.replace(a,t.slider_data_source_html)}function $(e,t){if(-1==e.indexOf("*|widget_theme|*"))return e;var a=new RegExp("\\*\\|widget_theme\\|\\*","g");return e.replace(a,t)}function X(e,t){var a=new RegExp("\\*\\|empty_review_message\\|\\*","g");return"empty_review_message"in e||(e.empty_review_message=c.empty_review_message),t.replace(a,e.empty_review_message)}function ee(e,t,a){var i=new RegExp("\\*\\|seal_type\\|\\*","g"),n=new RegExp("\\*\\|seal_type_group\\|\\*","g"),r=getSealType(e,t);return(a=a.replace(n,r)).replace(i,r)}function te(e,t,a,n){var r=new RegExp("\\*\\|rating_grade\\|\\*","g"),s=new RegExp("\\*\\|rating_grade_translated\\|\\*","g"),l=getRatingGrade(t,a),o="";return null!=e.rating_grade_translated?o=e.rating_grade_translated[l]:null!=languageData[e.tpl][getPageLanguage(i)]&&languageData[e.tpl][getPageLanguage(i)].rating_grade_translated&&(o=languageData[e.tpl][getPageLanguage(i)].rating_grade_translated[l]),""==l&&(o=""),(n=n.replace(s,o)).replace(r,l)}function ae(e,t,a){var i=new RegExp("\\*\\|filled_stars_computed_width\\|\\*","g"),n=new RegExp("\\*\\|filled_stars_computed_width_group\\|\\*","g"),r=e.filled_stars_computed_formula;if(r){var s=r.replace("*|rating|*",t).replace("*|rating_floor|*",Math.floor(t));return s=evolute(s),(a=a.replace(i,s)).replace(n,s)}return a}function ie(e,t){var a=new RegExp("\\*\\|rating_double\\|\\*","g"),i=new RegExp("\\*\\|rating_floor\\|\\*","g"),n=new RegExp("\\*\\|rating_percent\\|\\*","g"),r=new RegExp("\\*\\|rating_group\\|\\*","g"),s=new RegExp("\\*\\|rating_double_group\\|\\*","g"),l=new RegExp("\\*\\|rating_percent_group\\|\\*","g");return(t=(t=(t=(t=(t=t.replace(i,Math.floor(e))).replace(n,Math.round(e/5*100))).replace(r,e)).replace(s,2*e)).replace(l,Math.round(e/5*100))).replace(a,2*e)}function ne(e,t,a,i){var n=null!=e&&null!=e.total_reviews?e.total_reviews:0;if(i){if(null!=e&&null!=e.rating_group)s=e.rating_group;else if(null!=e&&null!=e.rating)s=e.rating;if(null!=s){a=ae(t,s,a=ie(s,a=te(t,n,s,a=ee(n,s,a=X(t,a)))));var r=new RegExp("\\*\\|ekomi_certificate_seo\\|\\*","g");a=a.replace(r,t.ekomi_certificate_seo)}}else{var s;if(null!=e&&null!=e.rating&&null!=n)a=ae(t,s=null!=e.rating?e.rating:0,a=ie(s,a=te(t,n,s,a=ee(n,s,a=X(t,a)))))}return a}function re(e,t,a,i,n){for(var r in e)if(e.hasOwnProperty(r)){var s=new RegExp("\\*\\|"+r+"\\|\\*","g");void 0!==r[0]&&"<"==r[0]&&(s=new RegExp(r,"g")),t=t.replace(s,e[r])}le(n,t=ne(e,a,t,i),oe)}function se(e,t,a,i,n,r,s){var l=(i=$(i=Z(i=K(i=Y(i=Q(i=H(i=V(i),e),r),a),a),a),window._theme)).match(/<repeat_[^>]+>/i);null!=l&&void 0!==l[0]?z(t,i,a,r,s,l,n,e):(re(t,i,a,n,e),T(t,r,e))}function le(e,t,a){var i=getDateFormat(t);if((t=t.replace("*|date_format_"+i+"|*","")).indexOf("SimpleScrollbar.initEl")>0){var n=document.createElement("script");n.src="https://sw-assets.ekomiapps.de/static_resources/simple-scrollbar.min.js",n.type="text/javascript",n.onload=function(){j(e,t,a)},document.getElementsByTagName("head")[0].appendChild(n)}else if(f(".data-ekomi-emp").length&&a){for(var r=a.split(",").sort(),s=".div_count_"+r.length,l=0;l<r.length;l++){s+=".div_"+r[l].replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("#").join("-_hash_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus")}f(s+".ekomi-widget-"+e).removeClass("data-ekomi-emp"),j(e,t,a)}else j(e,t,a);var o=f("#widget-container");f(".ekomi-widget-"+e).length&&(o=f(".ekomi-widget-"+e)),o.find(".ekomi-slick-slider").length&&(window.jq=f,f.getScript("https://sw-assets.ekomiapps.de/static_resources/slick.js",(function(){f(".ekomi-slick-slider").each((function(){f(this).not(".slick-initialized").slick()}))})))}widgetFileCount[i]=0;var oe="";if("ekomi-product-widget-identifier"==f(".ekomi-widget-"+i).next().attr("id")){var de=f("#ekomi-product-widget-identifier");f(".prod-data-emp").length&&(de=f(".ekomi-widget-"+i).next(".prod-data-emp").first()).removeClass("prod-data-emp"),oe=de.text();var ge=de.prev(),ce=oe.split(",").sort(),_e="div_count_"+ce.length;oe=ce.join(","),ge.addClass(_e),f.each(ce,(function(e,t){ge.addClass("div_"+t.replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("#").join("-_hash_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus").replace("(","brkt").replace(")","brkt").replace("{","brkt").replace("}","brkt").replace("[","brkt").replace("]","brkt").split(":").join("-coln-"))})),oe.trim()||(oe="")}h(oe,i)}(i,_)}"ajax"==_?w(u):f.each(window._ekomiWidgetTokens,(function(e,t){var a=t;null==h[a]?h[a]=0:h[a]++,e+1==window._ekomiWidgetTokens.length&&(window.ajaxEnabled=!0),function(e){var t=!1;return ekomiWidgetJquery(".ekomi-widget-"+e).each((function(){0==ekomiWidgetJquery.trim(ekomiWidgetJquery(this).text()).length&&(t=!0)})),t}(t)&&(h[a]>=1?setTimeout((function(){w(a)}),2e3):w(a))})),window.ekomiWidgetJquery(document).on("click",".translate_text_btn",(function(e){if(e.preventDefault(),f(this).is("[disabled=disabled]"))return!1;var t=f(this),a=f(this).parents(".text_translate_parent").find(".text_translate");0!==f(this).parents(".text_translate_parent").find(".trans_after").length?a.each((function(){var e=f.grep(this.className.split(" "),(function(e){return 0===e.indexOf("text_translate_")})).join(),t=f("."+e).html(),a=e.split("_")[2],i=f(this).parents(".text_translate_parent").find(".trans_after_"+a).text();if(t.trim()===i){var n=f(this).parents(".text_translate_parent").find(".trans_before_"+a).text();f(this).parents(".text_translate_parent").find(".text_translate_"+a).html(n)}else f(this).parents(".text_translate_parent").find(".text_translate_"+a).html(i)})):a.each((function(){var e=f(this).html();e&&translateText(e.trim(),f(this),t)}))}))}))}}();