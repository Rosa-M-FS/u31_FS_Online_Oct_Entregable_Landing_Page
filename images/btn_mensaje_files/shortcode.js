var check_pop_quiz,PopupUrl,shortcode_id,origin_URL="https://quizify.arhamcommerce.com",Api=origin_URL+"/quiz",Api_response=origin_URL+"/QuizifyResults";function GetQuizifyCartDetail(e){GETdata("/cart.js",function(t){var i=[];if(""!=t.items&&t.items.forEach(function(e){i.push(e.variant_id)}),""!=i){var a={update_quiz_cart:i};e[0].contentWindow.postMessage(a,"*")}else{var a={update_quiz_cart:i};e[0].contentWindow.postMessage(a,"*")}})}function checkStartoverQuerystring(e){let t=new URLSearchParams(window.location.search);if(!0==t.has("startover")){for(let[i,a]of t)if("yes"==a){var r={Quizify_dstrslt:!0};e[0].contentWindow.postMessage(r,"*")}}}function FindmyQuizifyIframe(){var e=document.getElementsByClassName("quizify"),t=document.getElementById("quizify");if(t&&(null!=t||void 0!=t)&&QuizifyEmbed_find_by_ID_CLASS(t),0!=e.length)for(var i=0;i<e.length;i++)(null!=e[i]||void 0!=e[i])&&QuizifyEmbed_find_by_ID_CLASS(e[i])}function QuizifyEmbed_find_by_ID_CLASS(e){var t=e.getAttribute("data-store-id"),i=e.getElementsByClassName("quizifyIframe_"+t);0!=i.length&&(i[0].addEventListener("onload",checkStartoverQuerystring(i)),i[0].addEventListener("onload",GetQuizifyCartDetail(i))),StopQuizifyIframeFinder()}function StopQuizifyIframeFinder(){clearInterval(findquizframe)}PopupUrl=(check_pop_quiz=location.hash).substr(0,12),window.addEventListener("popstate",function(e){PopupUrl=(check_pop_quiz=location.hash).substr(0,12),Popquiz()});var findquizframe=setInterval(FindmyQuizifyIframe,300),shortcode_styelsheet=document.createElement("link");shortcode_styelsheet.setAttribute("rel","stylesheet"),shortcode_styelsheet.setAttribute("href",origin_URL+"/css/shortcode.css"),document.head.appendChild(shortcode_styelsheet);var script_tag=document.createElement("script");function CloseQuizPreview(){document.querySelectorAll(".quizify-pop-container").forEach(function(e){e.remove()});let e=document.getElementById("quizify_add_body_overflow");e.remove();var t=location.hash,i=t.substr(0,12);if(t&&("quizify-pop"==i||"#quizify-pop"==i||"/#quizify-pop"==i)){window.location.hash="";var a=new CustomEvent("quizifyPopupClosed");window.dispatchEvent(a)}}function Popquiz(){var e=location.hash,t=e.substr(0,12),i=e.split(t+"-");if(e&&("quizify-pop"==t||"#quizify-pop"==t||"/#quizify-pop"==t)){document.body.classList.add("quizify_pop"),document.querySelector("html").classList.add("quizify_pop");var a=i[1].length,r=document.getElementById("quizifybadge");if(a>3)var n=null;else if(null!=r)var n=r.getAttribute("data-domain");var o=e.split("#quizify-pop-");shortcode_id=o[1];var s=document.createElement("div");s.className="quizify-pop-container",s.setAttribute("style","display: block;position:relative"),s.setAttribute("id","QuizifyPopContainer");var d=document.createElement("div");d.className="quizify_backdrop",d.setAttribute("style","display: block !important;");let l=document.createElement("div");l.className="quizify_loading",l.setAttribute("style","display: block !important;");var u=document.createElement("div");u.className="quizify-pop-inner",u.setAttribute("style","display: block;margin:0;border:0;padding:0;outline: 0;box-sizing: border-box;");var p=document.createElement("div");p.className="quizify-fullscreen-sec",p.setAttribute("style","opacity: 1; top: 0!important;left: 0!important;right: 0!important;width: 100%;height: 100%;position: fixed;z-index: 2147483646;visibility: visible;pointer-events: auto;webkit-transition: opacity .3s cubic-bezier(.645,.045,.355,1);transition: opacity .3s cubic-bezier(.645,.045,.355,1);");var c=document.createElement("iframe");!function e(t,i){for(var a in i)t.setAttribute(a,i[a])}(c,{id:"iframeid","data-domain":window.location.host,"data-type":"quizify-popup",src:Api+"/"+o[1]+"/"+n+"?quizify-pop-quiz",style:"width: 100%;height:100%;min-height: 100%; border:none; overflow:scroll;  top:0px; left:0px; bottom:0px;display: block;"}),c.onload=function(){let e=document.getElementsByClassName("quizify_loading")[0],t=document.getElementsByClassName("quizify_backdrop")[0];e&&e.remove(),t&&t.remove()};var f=".quizify-close-btn {position: fixed;right: 18px;top: 25px;width: 25px;height: 25px;opacity: 0.3;z-index: 2147483647;cursor:pointer;}";f+=f+="@media(max-width:1024px){.quizify-close-btn {top: 20px;right: 30px;}}",f+=".quizify_backdrop{position: fixed; top: 0;left: 0;height: 100%;width: 100%;background-color: #ffffff;opacity: 0.7;z-index: 2147483646;}",f+='.quizify_loading {height: 5px;width: 150px;border-radius: 20px;background: #ddd;position: fixed;left: 50%;top: 50%;transform: translate(-50%, -50%);z-index: 2147483647;overflow: hidden;}.quizify_loading::before {content: "";display: block;height: 100%;width: 0;background: #000;animation: progress 10s linear infinite;}@keyframes progress {100% {width: 100%;}}',f+=".quizify-close-btn:hover {opacity: 1;}",f+='.quizify-close-btn:before, .quizify-close-btn:after { position: absolute;left: 15px; content: " "; height: 25px; width: 2px;background-color: #333;}',f+=".quizify-close-btn:before { transform: rotate(45deg);}",f+=".quizify-close-btn:after {transform: rotate(-45deg);}";var y=document.createElement("style");y.type="text/css",y.appendChild(document.createTextNode(f));var m=document.createElement("style");m.type="text/css",m.setAttribute("id","quizify_add_body_overflow"),m.appendChild(document.createTextNode("body {overflow:hidden}"));var h=document.createElement("span");h.className="quizify-close-btn",h.setAttribute("onclick","CloseQuizPreview()"),document.body.append(s),document.head.append(y,m),s.appendChild(h),s.appendChild(u),s.appendChild(d),s.appendChild(l),u.appendChild(p),p.appendChild(c);var $={PopAccessByquizify:!0};setTimeout(function(){document.getElementById("iframeid").contentWindow.postMessage($,"*")},1e3)}}function find_embed_iframe(){var e=document.getElementById("quizify"),t=document.getElementsByClassName("quizify");if(0!=t.length)for(var i=0;i<t.length;i++)(null!=t[i]||void 0!=t[i])&&embed_iframe(t[i]);else e&&(null!=e||void 0!=e)&&embed_iframe(e)}function embed_iframe(e){var t,i=e.getAttribute("data-store-id"),a=e.getAttribute("data-shop-domain"),r=null;shortcode_id=i,r=i.length<=3?a:null;var n=document.createElement("iframe");function o(){window.addEventListener("message",function e(t){if(t.origin!==origin_URL)return},!1);var i=function(i){if(i.origin===origin_URL&&((void 0!=i.data||"undefined"!=i.data&&i.data.quiz_ids)&&i.data.quiz_ids&&i.data.quiz_ids.quiz_shortcode_id&&(a=i.data.quiz_ids.quiz_shortcode_id,t=e.getElementsByClassName("quizifyIframe_"+a)),t&&1==t.length)){var a,r=0,n=0;if(void 0!=i.data||"undefined"!=i.data){if(i.data.quizify_frame_height&&(n=(r=i.data.quizify_frame_height)+50,t[0].style.height=r+"px"),i.data.autoscroll&&("true"==i.data.autoscroll||!0==i.data.autoscroll)){let o=-i.data.ScrollToTop,s=t[0].getBoundingClientRect().top+window.pageYOffset+o;window.scrollTo({top:s,behavior:"smooth"})}}else t[0].style.minHeight="500px";setTimeout(function(){"No_frame"==i.data&&t[0].remove()},1e3)}};window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent&&window.attachEvent("onmessage",i)}n.id="iframeid",n.onload=function(){AccessQuizFrameLoaderAfter(e)},n.setAttribute("data-frameid",i),n.setAttribute("class","quizifyIframe_"+i),n.setAttribute("data-domain",r),n.src=Api+"/"+i+"/"+r,n.style="display: block; top:0px; left:0px; bottom:0px;min-height:500px;right:0px; width:100%;border:none; margin:0; padding:0; overflow:hidden; z-index:999999;",e.appendChild(n),o(),window.onresize=function(e){o()}}function AccessQuizFrameLoaderAfter(){let e=document.querySelector(".quizify-loader");e&&e.remove()}script_tag.setAttribute("src",origin_URL+"/js/shortcode_popup_quiz.js"),document.head.appendChild(script_tag),Popquiz(),window.addEventListener("message",function(e){if("customer_result"==e.data.view&&HitToCheckout(e.data),e.data.variant_id&&"AddQty"==e.data.action){var t=e.data.variant_id,i=1,a=1,r=e.data.plain_quiz_id,n=e.data.plain_quiz_title,o=e.data.selectedSellingPlanValue,s=e.data.custom_input,d=e.data.quiz_prv_id;addTocart(d,t,i,a,r,n,s,type="single",o)}else if(e.data.variant_id&&"RemoveQty"==e.data.action){var t=e.data.variant_id,i=1;removeQTY(t,i)}if(e.data.all_variant){var l=e.data.all_variant,s=e.data.custom_input,o=null,a=l.length,d=e.data.quiz_prv_id;let u=function t(i){setTimeout(function(){let r=i-1;if(r>=0){var n=e.data.plain_quiz_id,u=e.data.plain_quiz_title;t(r),addTocart(d,l[r],i,a,n,u,s,type="multiple",o)}},1e3)},p=u;u=null,p(a)}if("quizifyResult"==e.data){var c=new CustomEvent("quizifyResult",{detail:this.response});if(window.dispatchEvent(c),1==document.getElementsByClassName("quizify-pop-container").length){var f=document.getElementById("iframeid");f.style.height="99.9%",f.style.overflow="auto",f.style.minHeight="99.9%",setTimeout(()=>{f.style.height="100%",f.style.minHeight="100%"},5e3)}}"forwardToStore"==e.data.QuizifyResultCheckout&&("checkout"==e.data.forward_to?window.open("/checkout","_self"):window.open("/cart","_self")),e.data.type&&"StorefrontMessage::ReplaceSection"==e.data.type&&find_embed_iframe()}),find_embed_iframe();var customer_resultby_id=document.getElementById("quizifyresults"),customer_resultby_class=document.getElementsByClassName("quizifyresults");if(0!=customer_resultby_class.length)for(var cr=0;cr<customer_resultby_class.length;cr++)(null!=customer_resultby_class[cr]||void 0!=customer_resultby_class[cr])&&load_result_widgets(customer_resultby_class[cr]);function load_result_widgets(e){var t,i=e.innerHTML,a=e.getAttribute("data-source"),r=e.getAttribute("data-id"),n=localStorage.getItem("Quizify_result_widget"+r),o=e.hasAttribute("data-shop-domain"),s=null;if(s=!0==o?e.getAttribute("data-shop-domain"):null,null!=n?(t=n,e.setAttribute("data-source",n)):void 0!=n?(t=n,e.setAttribute("data-source",n)):""==a||void 0==a||"{{ customer.email }}"==a?t="emailNotdefine":(t=window.btoa(a),e.setAttribute("data-source",t)),!0==o){var d=i.replace(""+i,"<iframe id='quizify_result_frame' class='quizify_result_frame' data-domain='"+s+"' src="+Api_response+"/"+t+"/"+r+"/"+s+" style='display: block; top:0px; left:0px; bottom:0px;height:700px;min-height:700px;right:0px; width:100%;border:none; margin:0; padding:0; overflow:hidden; z-index:999999;' ></iframe>");e.innerHTML=d}else{var l=i.replace(""+i,"<iframe id='quizify_result_frame' data-domain='"+s+"' src="+Api_response+"/"+t+"/"+r+" style='display: block; top:0px; left:0px; bottom:0px;height:700px;min-height:700px;right:0px; width:100%;border:none; margin:0; padding:0; overflow:hidden; z-index:999999;' ></iframe>");e.innerHTML=l}function u(){window.addEventListener("message",function e(t){if(t.origin!==origin_URL)return},!1);var t=function(t){if(t.origin===origin_URL&&document.getElementById("quizify_result_frame")&&(void 0!=t.data||"undefined"!=t.data)&&t.data.enc_email){var i=t.data.enc_email;e.setAttribute("data-source",i),localStorage.setItem("Quizify_result_widget"+r,i)}};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent&&window.attachEvent("onmessage",t)}u(),window.onresize=function(e){u()}}function addTocart(e,t,i,a,r,n,o,s,d){var l,u,p=document.getElementsByClassName("quizifyIframe_"+e),c=document.getElementById("popup_iframe_id");u=0!=p.length?(l=p)[0].getAttribute("data-domain"):null!=c&&0!=c.length?(l=document.getElementById("popup_iframe_id")).getAttribute("data-domain"):(l=document.getElementById("iframeid")).getAttribute("data-domain");var f=new XMLHttpRequest;if(f.open("POST","/cart/add.js",!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var r={analytic_type:"add_to_cart",shortcode_id:shortcode_id,add_to_cart:a,quiz_domain:shortcode_id.length<=3?u:null};if(1==i)setTimeout(function(){var t=document.getElementsByClassName("quizifyIframe_"+e);if(0!=t.length){t[0].contentWindow.postMessage(r,"*");var i=new CustomEvent("quizifyAddToCart",{detail:this.response});window.dispatchEvent(i),UpdateCartBag()}else if(document.getElementById("popup_iframe_id")){document.getElementById("popup_iframe_id").contentWindow.postMessage(r,"*");var i=new CustomEvent("quizifyAddToCart",{detail:this.response});window.dispatchEvent(i),UpdateCartBag()}else{let a=document.getElementById("iframeid");if(0!=a.length){a.contentWindow.postMessage(r,"*");var i=new CustomEvent("quizifyAddToCart",{detail:this.response});window.dispatchEvent(i),UpdateCartBag()}}},1e3);else{console.log("in cart 3");var n={continue_cart:!0,variant_id:t};setTimeout(function(){var t=document.getElementsByClassName("quizifyIframe_"+e);0!=t.length?t[0].contentWindow.postMessage(n,"*"):document.getElementById("popup_iframe_id")&&document.getElementById("popup_iframe_id").contentWindow.postMessage(n,"*")},1e3)}}},"single"==s){var y="quantity=1&id="+t+"&properties[_Source]=Quizify&properties[_Quizify ID]="+r+"&properties[_Quizify Title]="+n;o&&(y+="&properties["+o.custom_input_label+"]="+o.custom_input_value),d&&(y+="&selling_plan="+d),f.send(y)}else if(void 0==o||null==o||""==o)f.send("quantity=1&id="+t+"&properties[_Source]=Quizify&properties[_Quizify ID]="+r+"&properties[_Quizify Title]="+n);else if(0==o.length)f.send("quantity=1&id="+t+"&properties[_Source]=Quizify&properties[_Quizify ID]="+r+"&properties[_Quizify Title]="+n);else{let m=o.filter(e=>e.id===t);1==m.length?f.send("quantity=1&id="+t+"&properties[_Source]=Quizify&properties[_Quizify ID]="+r+"&properties[_Quizify Title]="+n+"&properties["+m[0].custom_label+"]="+m[0].custom_input):f.send("quantity=1&id="+t+"&properties[_Source]=Quizify&properties[_Quizify ID]="+r+"&properties[_Quizify Title]="+n)}}function HitToCheckout(e){if(e.ids){var t=JSON.stringify(e.ids).replace(/[{()}"]/g,"");e.plain_quiz_id,e.plain_quiz_title;var i="https://"+e.domain+"/cart/"+t;window.open(i,"_blank")}}function removeQTY(e,t){GETdata("/cart.js",function(t){t.items.forEach(function(t){if(t.id==e){var i=t.quantity-1;i<0&&(i=0);var a={};a[e]=i,POSTdata("/cart/update.js",{updates:a},function(e){UpdateCartBag()})}})})}function accessHTML(e){e&&e.length>0&&GETdata("/cart.js",function(t){for(var i=0;i<e.length;i++)e[i].innerHTML=t.item_count})}function GETdata(e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&t(JSON.parse(i.responseText))},i.open("GET",e,!0),i.send(null)}function POSTdata(e,t,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&i(JSON.parse(a.responseText))},a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify(t))}function UpdateCartBag(){GETdata("/cart.js",function(e){let t=e.item_count,i=document.querySelector("#cart-icon-bubble"),a=i.querySelector(".cart-count-bubble");t>0?a?(a.querySelector('span[aria-hidden="true"]').textContent=t,a.querySelector(".visually-hidden").textContent=`${t} item${t>1?"s":""}`):((a=document.createElement("div")).className="cart-count-bubble",a.innerHTML=`
                        <span aria-hidden="true">${t}</span>
                        <span class="visually-hidden">${t} item${t>1?"s":""}</span>
                    `,i.appendChild(a)):a&&a.remove()})}customer_resultby_id&&(null!=customer_resultby_id||void 0!=customer_resultby_id)&&load_result_widgets(customer_resultby_id);